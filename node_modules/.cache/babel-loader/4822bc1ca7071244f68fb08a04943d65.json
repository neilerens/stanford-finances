{"ast":null,"code":"import _uniq from 'lodash/uniq';\nimport React, { useState, useMemo, memo, useCallback, Fragment } from 'react';\nimport { blendModePropType, motionPropTypes, noop, useTheme, getLabelGenerator, useMotionConfig, useAnimatedPath, withContainer, useDimensions, SvgWrapper, ResponsiveWrapper } from '@nivo/core';\nimport { LegendPropShape, BoxLegendSvg } from '@nivo/legends';\nimport PropTypes from 'prop-types';\nimport { sankeyCenter, sankeyJustify, sankeyLeft, sankeyRight, sankey } from 'd3-sankey';\nimport { ordinalColorsPropType, inheritedColorPropType, useOrdinalColorScale, useInheritedColor } from '@nivo/colors';\nimport _cloneDeep from 'lodash/cloneDeep';\nimport { useSpring, animated, to, useSprings } from 'react-spring';\nimport { useTooltip, BasicTooltip, Chip } from '@nivo/tooltip';\nimport { line, curveMonotoneX, curveMonotoneY } from 'd3-shape';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar sankeyAlignmentPropMapping = {\n  center: sankeyCenter,\n  justify: sankeyJustify,\n  start: sankeyLeft,\n  end: sankeyRight\n};\nvar sankeyAlignmentPropKeys = Object.keys(sankeyAlignmentPropMapping);\nvar sankeyAlignmentPropType = PropTypes.oneOf(sankeyAlignmentPropKeys);\n\nvar sankeyAlignmentFromProp = function sankeyAlignmentFromProp(prop) {\n  return sankeyAlignmentPropMapping[prop];\n};\n\nvar SankeyPropTypes = _objectSpread2({\n  data: PropTypes.shape({\n    nodes: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired\n    })).isRequired,\n    links: PropTypes.arrayOf(PropTypes.shape({\n      source: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n      target: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired\n    })).isRequired\n  }).isRequired,\n  layout: PropTypes.oneOf(['horizontal', 'vertical']).isRequired,\n  align: sankeyAlignmentPropType.isRequired,\n  sort: PropTypes.oneOfType([PropTypes.oneOf(['auto', 'input', 'ascending', 'descending']), PropTypes.func]).isRequired,\n  colors: ordinalColorsPropType.isRequired,\n  nodeOpacity: PropTypes.number.isRequired,\n  nodeHoverOpacity: PropTypes.number.isRequired,\n  nodeHoverOthersOpacity: PropTypes.number.isRequired,\n  nodeThickness: PropTypes.number.isRequired,\n  nodeSpacing: PropTypes.number.isRequired,\n  nodeInnerPadding: PropTypes.number.isRequired,\n  nodeBorderWidth: PropTypes.number.isRequired,\n  nodeBorderColor: inheritedColorPropType,\n  linkOpacity: PropTypes.number.isRequired,\n  linkHoverOpacity: PropTypes.number.isRequired,\n  linkHoverOthersOpacity: PropTypes.number.isRequired,\n  linkContract: PropTypes.number.isRequired,\n  linkBlendMode: blendModePropType.isRequired,\n  enableLinkGradient: PropTypes.bool.isRequired,\n  enableLabels: PropTypes.bool.isRequired,\n  labelPosition: PropTypes.oneOf(['inside', 'outside']).isRequired,\n  labelPadding: PropTypes.number.isRequired,\n  labelOrientation: PropTypes.oneOf(['horizontal', 'vertical']).isRequired,\n  labelTextColor: inheritedColorPropType,\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.func]).isRequired,\n  labelFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  nodeTooltip: PropTypes.func,\n  linkTooltip: PropTypes.func,\n  isInteractive: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n  tooltipFormat: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  legends: PropTypes.arrayOf(PropTypes.shape(LegendPropShape)).isRequired,\n  layers: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.oneOf(['links', 'nodes', 'labels', 'legends']), PropTypes.func])).isRequired,\n  role: PropTypes.string.isRequired\n}, motionPropTypes);\n\nvar SankeyDefaultProps = {\n  layout: 'horizontal',\n  align: 'center',\n  sort: 'auto',\n  colors: {\n    scheme: 'nivo'\n  },\n  nodeOpacity: 0.75,\n  nodeHoverOpacity: 1,\n  nodeHoverOthersOpacity: 0.15,\n  nodeThickness: 12,\n  nodeSpacing: 12,\n  nodeInnerPadding: 0,\n  nodeBorderWidth: 1,\n  nodeBorderColor: {\n    from: 'color',\n    modifiers: [['darker', 0.5]]\n  },\n  linkOpacity: 0.25,\n  linkHoverOpacity: 0.6,\n  linkHoverOthersOpacity: 0.15,\n  linkContract: 0,\n  linkBlendMode: 'multiply',\n  enableLinkGradient: false,\n  enableLabels: true,\n  label: 'id',\n  labelPosition: 'inside',\n  labelPadding: 9,\n  labelOrientation: 'horizontal',\n  labelTextColor: {\n    from: 'color',\n    modifiers: [['darker', 0.8]]\n  },\n  isInteractive: true,\n  onClick: noop,\n  legends: [],\n  layers: ['links', 'nodes', 'labels', 'legends'],\n  role: 'img',\n  animate: true,\n  motionConfig: 'gentle'\n};\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nvar getId = function getId(d) {\n  return d.id;\n};\n\nvar computeNodeAndLinks = function computeNodeAndLinks(_ref) {\n  var _data = _ref.data,\n      layout = _ref.layout,\n      alignFunction = _ref.alignFunction,\n      sortFunction = _ref.sortFunction,\n      linkSortMode = _ref.linkSortMode,\n      nodeThickness = _ref.nodeThickness,\n      nodeSpacing = _ref.nodeSpacing,\n      nodeInnerPadding = _ref.nodeInnerPadding,\n      width = _ref.width,\n      height = _ref.height,\n      getColor = _ref.getColor,\n      getLinkColor = _ref.getLinkColor,\n      getLabel = _ref.getLabel;\n  var sankey$1 = sankey().nodeAlign(alignFunction).nodeSort(sortFunction).linkSort(linkSortMode).nodeWidth(nodeThickness).nodePadding(nodeSpacing).size(layout === 'horizontal' ? [width, height] : [height, width]).nodeId(getId);\n\n  var data = _cloneDeep(_data);\n\n  sankey$1(data);\n  data.nodes.forEach(function (node) {\n    node.color = getColor(node);\n    node.label = getLabel(node);\n\n    if (layout === 'horizontal') {\n      node.x = node.x0 + nodeInnerPadding;\n      node.y = node.y0;\n      node.width = Math.max(node.x1 - node.x0 - nodeInnerPadding * 2, 0);\n      node.height = Math.max(node.y1 - node.y0, 0);\n    } else {\n      node.x = node.y0;\n      node.y = node.x0 + nodeInnerPadding;\n      node.width = Math.max(node.y1 - node.y0, 0);\n      node.height = Math.max(node.x1 - node.x0 - nodeInnerPadding * 2, 0);\n      var oldX0 = node.x0;\n      var oldX1 = node.x1;\n      node.x0 = node.y0;\n      node.x1 = node.y1;\n      node.y0 = oldX0;\n      node.y1 = oldX1;\n    }\n  });\n  data.links.forEach(function (link) {\n    link.color = getLinkColor(link);\n    link.pos0 = link.y0;\n    link.pos1 = link.y1;\n    link.thickness = link.width;\n    delete link.y0;\n    delete link.y1;\n    delete link.width;\n  });\n  return data;\n};\n\nvar useSankey = function useSankey(_ref2) {\n  var data = _ref2.data,\n      layout = _ref2.layout,\n      width = _ref2.width,\n      height = _ref2.height,\n      sort = _ref2.sort,\n      align = _ref2.align,\n      colors = _ref2.colors,\n      nodeThickness = _ref2.nodeThickness,\n      nodeSpacing = _ref2.nodeSpacing,\n      nodeInnerPadding = _ref2.nodeInnerPadding,\n      nodeBorderColor = _ref2.nodeBorderColor,\n      label = _ref2.label,\n      labelFormat = _ref2.labelFormat,\n      labelTextColor = _ref2.labelTextColor;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentNode = _useState2[0],\n      setCurrentNode = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentLink = _useState4[0],\n      setCurrentLink = _useState4[1];\n\n  var sortFunction = useMemo(function () {\n    if (sort === 'auto') return undefined;\n    if (sort === 'input') return null;\n    if (sort === 'ascending') return function (a, b) {\n      return a.value - b.value;\n    };\n    if (sort === 'descending') return function (a, b) {\n      return b.value - a.value;\n    };\n    return sort;\n  }, [sort]);\n  var linkSortMode = sort === 'input' ? null : undefined;\n  var alignFunction = useMemo(function () {\n    return sankeyAlignmentFromProp(align);\n  }, [align]);\n  var theme = useTheme();\n  var getColor = useOrdinalColorScale(colors, 'id');\n  var getNodeBorderColor = useInheritedColor(nodeBorderColor, theme);\n  var getLinkColor = useOrdinalColorScale(colors, 'source.id');\n  var getLabel = useMemo(function () {\n    return getLabelGenerator(label, labelFormat);\n  }, [label, labelFormat]);\n  var getLabelTextColor = useInheritedColor(labelTextColor, theme);\n\n  var _useMemo = useMemo(function () {\n    return computeNodeAndLinks({\n      data: data,\n      layout: layout,\n      alignFunction: alignFunction,\n      sortFunction: sortFunction,\n      linkSortMode: linkSortMode,\n      nodeThickness: nodeThickness,\n      nodeSpacing: nodeSpacing,\n      nodeInnerPadding: nodeInnerPadding,\n      width: width,\n      height: height,\n      getColor: getColor,\n      getLinkColor: getLinkColor,\n      getLabel: getLabel\n    });\n  }, [data, layout, alignFunction, sortFunction, linkSortMode, nodeThickness, nodeSpacing, nodeInnerPadding, width, height, getColor, getLinkColor, getLabel]),\n      nodes = _useMemo.nodes,\n      links = _useMemo.links;\n\n  var legendData = useMemo(function () {\n    return nodes.map(function (node) {\n      return {\n        id: node.id,\n        label: node.label,\n        color: node.color\n      };\n    });\n  }, [nodes]);\n  return {\n    nodes: nodes,\n    links: links,\n    legendData: legendData,\n    getNodeBorderColor: getNodeBorderColor,\n    currentNode: currentNode,\n    setCurrentNode: setCurrentNode,\n    currentLink: currentLink,\n    setCurrentLink: setCurrentLink,\n    getLabelTextColor: getLabelTextColor\n  };\n};\n\nvar SankeyNodesItem = function SankeyNodesItem(_ref) {\n  var node = _ref.node,\n      x = _ref.x,\n      y = _ref.y,\n      width = _ref.width,\n      height = _ref.height,\n      color = _ref.color,\n      opacity = _ref.opacity,\n      borderWidth = _ref.borderWidth,\n      borderColor = _ref.borderColor,\n      setCurrent = _ref.setCurrent,\n      isInteractive = _ref.isInteractive,\n      onClick = _ref.onClick,\n      tooltip = _ref.tooltip;\n\n  var _useMotionConfig = useMotionConfig(),\n      animate = _useMotionConfig.animate,\n      springConfig = _useMotionConfig.config;\n\n  var animatedProps = useSpring({\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    opacity: opacity,\n    color: color,\n    config: springConfig,\n    immediate: !animate\n  });\n\n  var _useTooltip = useTooltip(),\n      showTooltipFromEvent = _useTooltip.showTooltipFromEvent,\n      hideTooltip = _useTooltip.hideTooltip;\n\n  var tooltipContent = useMemo(function () {\n    if (tooltip) {\n      return React.createElement(BasicTooltip, {\n        id: tooltip(node),\n        enableChip: false\n      });\n    }\n\n    return React.createElement(BasicTooltip, {\n      id: node.label,\n      enableChip: true,\n      color: node.color\n    });\n  }, [tooltip, node]);\n  var handleMouseEnter = useCallback(function (event) {\n    setCurrent(node);\n    showTooltipFromEvent(tooltipContent, event, 'left');\n  }, [setCurrent, node, showTooltipFromEvent, tooltipContent]);\n  var handleMouseMove = useCallback(function (event) {\n    showTooltipFromEvent(tooltipContent, event, 'left');\n  }, [showTooltipFromEvent, tooltipContent]);\n  var handleMouseLeave = useCallback(function () {\n    setCurrent(null);\n    hideTooltip();\n  }, [setCurrent, hideTooltip]);\n  var handleClick = useCallback(function (event) {\n    onClick(node, event);\n  }, [onClick, node]);\n  return React.createElement(animated.rect, {\n    x: animatedProps.x,\n    y: animatedProps.y,\n    width: to(animatedProps.width, function (v) {\n      return Math.max(v, 0);\n    }),\n    height: to(animatedProps.height, function (v) {\n      return Math.max(v, 0);\n    }),\n    fill: animatedProps.color,\n    fillOpacity: animatedProps.opacity,\n    strokeWidth: borderWidth,\n    stroke: borderColor,\n    strokeOpacity: opacity,\n    onMouseEnter: isInteractive ? handleMouseEnter : undefined,\n    onMouseMove: isInteractive ? handleMouseMove : undefined,\n    onMouseLeave: isInteractive ? handleMouseLeave : undefined,\n    onClick: isInteractive ? handleClick : undefined\n  });\n};\n\nvar SankeyNodesItem$1 = memo(SankeyNodesItem);\n\nvar SankeyNodes = function SankeyNodes(_ref) {\n  var nodes = _ref.nodes,\n      nodeOpacity = _ref.nodeOpacity,\n      nodeHoverOpacity = _ref.nodeHoverOpacity,\n      nodeHoverOthersOpacity = _ref.nodeHoverOthersOpacity,\n      nodeBorderWidth = _ref.nodeBorderWidth,\n      getNodeBorderColor = _ref.getNodeBorderColor,\n      setCurrentNode = _ref.setCurrentNode,\n      currentNode = _ref.currentNode,\n      currentLink = _ref.currentLink,\n      isCurrentNode = _ref.isCurrentNode,\n      isInteractive = _ref.isInteractive,\n      onClick = _ref.onClick,\n      tooltip = _ref.tooltip;\n\n  var getOpacity = function getOpacity(node) {\n    if (!currentNode && !currentLink) return nodeOpacity;\n    if (isCurrentNode(node)) return nodeHoverOpacity;\n    return nodeHoverOthersOpacity;\n  };\n\n  return nodes.map(function (node) {\n    return React.createElement(SankeyNodesItem$1, {\n      key: node.id,\n      node: node,\n      x: node.x,\n      y: node.y,\n      width: node.width,\n      height: node.height,\n      color: node.color,\n      opacity: getOpacity(node),\n      borderWidth: nodeBorderWidth,\n      borderColor: getNodeBorderColor(node),\n      setCurrent: setCurrentNode,\n      isInteractive: isInteractive,\n      onClick: onClick,\n      tooltip: tooltip\n    });\n  });\n};\n\nvar SankeyNodes$1 = memo(SankeyNodes);\nvar SankeyLinkGradient = memo(function (_ref) {\n  var id = _ref.id,\n      layout = _ref.layout,\n      startColor = _ref.startColor,\n      endColor = _ref.endColor;\n  var gradientProps = {};\n\n  if (layout === 'horizontal') {\n    gradientProps.x1 = '0%';\n    gradientProps.x2 = '100%';\n    gradientProps.y1 = '0%';\n    gradientProps.y2 = '0%';\n  } else {\n    gradientProps.x1 = '0%';\n    gradientProps.x2 = '0%';\n    gradientProps.y1 = '0%';\n    gradientProps.y2 = '100%';\n  }\n\n  return React.createElement(\"linearGradient\", Object.assign({\n    id: id,\n    spreadMethod: \"pad\"\n  }, gradientProps), React.createElement(\"stop\", {\n    offset: \"0%\",\n    stopColor: startColor\n  }), React.createElement(\"stop\", {\n    offset: \"100%\",\n    stopColor: endColor\n  }));\n});\nSankeyLinkGradient.displayName = 'SankeyLinkGradient';\nvar tooltipStyles = {\n  container: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  sourceChip: {\n    marginRight: 7\n  },\n  targetChip: {\n    marginLeft: 7,\n    marginRight: 7\n  }\n};\n\nvar TooltipContent = function TooltipContent(_ref) {\n  var link = _ref.link,\n      format = _ref.format;\n  return React.createElement(\"span\", {\n    style: tooltipStyles.container\n  }, React.createElement(Chip, {\n    color: link.source.color,\n    style: tooltipStyles.sourceChip\n  }), React.createElement(\"strong\", null, link.source.label), ' > ', React.createElement(\"strong\", null, link.target.label), React.createElement(Chip, {\n    color: link.target.color,\n    style: tooltipStyles.targetChip\n  }), React.createElement(\"strong\", null, format ? format(link.value) : link.value));\n};\n\nvar SankeyLinksItem = function SankeyLinksItem(_ref2) {\n  var link = _ref2.link,\n      layout = _ref2.layout,\n      path = _ref2.path,\n      color = _ref2.color,\n      opacity = _ref2.opacity,\n      blendMode = _ref2.blendMode,\n      enableGradient = _ref2.enableGradient,\n      setCurrent = _ref2.setCurrent,\n      tooltip = _ref2.tooltip,\n      tooltipFormat = _ref2.tooltipFormat,\n      isInteractive = _ref2.isInteractive,\n      onClick = _ref2.onClick;\n  var linkId = \"\".concat(link.source.id, \".\").concat(link.target.id);\n\n  var _useMotionConfig = useMotionConfig(),\n      animate = _useMotionConfig.animate,\n      springConfig = _useMotionConfig.config;\n\n  var animatedPath = useAnimatedPath(path);\n  var animatedProps = useSpring({\n    color: color,\n    opacity: opacity,\n    config: springConfig,\n    immediate: !animate\n  });\n\n  var _useTooltip = useTooltip(),\n      showTooltipFromEvent = _useTooltip.showTooltipFromEvent,\n      hideTooltip = _useTooltip.hideTooltip;\n\n  var tooltipContent = useMemo(function () {\n    if (tooltip) {\n      return React.createElement(BasicTooltip, {\n        id: tooltip(link),\n        enableChip: false\n      });\n    }\n\n    return React.createElement(BasicTooltip, {\n      id: React.createElement(TooltipContent, {\n        format: tooltipFormat,\n        link: link\n      })\n    });\n  }, [tooltip, tooltipFormat, link]);\n  var handleMouseEnter = useCallback(function (event) {\n    setCurrent(link);\n    showTooltipFromEvent(tooltipContent, event, 'left');\n  }, [setCurrent, link, showTooltipFromEvent, tooltipContent]);\n  var handleMouseMove = useCallback(function (event) {\n    showTooltipFromEvent(tooltipContent, event, 'left');\n  }, [showTooltipFromEvent, tooltipContent]);\n  var handleMouseLeave = useCallback(function () {\n    setCurrent(null);\n    hideTooltip();\n  }, [setCurrent, hideTooltip]);\n  var handleClick = useCallback(function (event) {\n    onClick(link, event);\n  }, [onClick, link]);\n  return React.createElement(React.Fragment, null, enableGradient && React.createElement(SankeyLinkGradient, {\n    id: linkId,\n    layout: layout,\n    startColor: link.startColor || link.source.color,\n    endColor: link.endColor || link.target.color\n  }), React.createElement(animated.path, {\n    fill: enableGradient ? \"url(\\\"#\".concat(encodeURI(linkId), \"\\\")\") : animatedProps.color,\n    d: animatedPath,\n    fillOpacity: animatedProps.opacity,\n    onMouseEnter: isInteractive ? handleMouseEnter : undefined,\n    onMouseMove: isInteractive ? handleMouseMove : undefined,\n    onMouseLeave: isInteractive ? handleMouseLeave : undefined,\n    onClick: isInteractive ? handleClick : undefined,\n    style: {\n      mixBlendMode: blendMode\n    }\n  }));\n};\n\nvar SankeyLinksItem$1 = memo(SankeyLinksItem);\n\nvar sankeyLinkHorizontal = function sankeyLinkHorizontal() {\n  var lineGenerator = line().curve(curveMonotoneX);\n  return function (n, contract) {\n    var thickness = Math.max(1, n.thickness - contract * 2);\n    var halfThickness = thickness / 2;\n    var linkLength = n.target.x0 - n.source.x1;\n    var padLength = linkLength * 0.12;\n    var dots = [[n.source.x1, n.pos0 - halfThickness], [n.source.x1 + padLength, n.pos0 - halfThickness], [n.target.x0 - padLength, n.pos1 - halfThickness], [n.target.x0, n.pos1 - halfThickness], [n.target.x0, n.pos1 + halfThickness], [n.target.x0 - padLength, n.pos1 + halfThickness], [n.source.x1 + padLength, n.pos0 + halfThickness], [n.source.x1, n.pos0 + halfThickness], [n.source.x1, n.pos0 - halfThickness]];\n    return lineGenerator(dots) + 'Z';\n  };\n};\n\nvar sankeyLinkVertical = function sankeyLinkVertical() {\n  var lineGenerator = line().curve(curveMonotoneY);\n  return function (n, contract) {\n    var thickness = Math.max(1, n.thickness - contract * 2);\n    var halfThickness = thickness / 2;\n    var linkLength = n.target.y0 - n.source.y1;\n    var padLength = linkLength * 0.12;\n    var dots = [[n.pos0 + halfThickness, n.source.y1], [n.pos0 + halfThickness, n.source.y1 + padLength], [n.pos1 + halfThickness, n.target.y0 - padLength], [n.pos1 + halfThickness, n.target.y0], [n.pos1 - halfThickness, n.target.y0], [n.pos1 - halfThickness, n.target.y0 - padLength], [n.pos0 - halfThickness, n.source.y1 + padLength], [n.pos0 - halfThickness, n.source.y1], [n.pos0 + halfThickness, n.source.y1]];\n    return lineGenerator(dots) + 'Z';\n  };\n};\n\nvar SankeyLinks = function SankeyLinks(_ref) {\n  var links = _ref.links,\n      layout = _ref.layout,\n      linkOpacity = _ref.linkOpacity,\n      linkHoverOpacity = _ref.linkHoverOpacity,\n      linkHoverOthersOpacity = _ref.linkHoverOthersOpacity,\n      linkContract = _ref.linkContract,\n      linkBlendMode = _ref.linkBlendMode,\n      enableLinkGradient = _ref.enableLinkGradient,\n      setCurrentLink = _ref.setCurrentLink,\n      currentNode = _ref.currentNode,\n      currentLink = _ref.currentLink,\n      isCurrentLink = _ref.isCurrentLink,\n      isInteractive = _ref.isInteractive,\n      onClick = _ref.onClick,\n      tooltipFormat = _ref.tooltipFormat,\n      tooltip = _ref.tooltip;\n\n  var getOpacity = function getOpacity(link) {\n    if (!currentNode && !currentLink) return linkOpacity;\n    if (isCurrentLink(link)) return linkHoverOpacity;\n    return linkHoverOthersOpacity;\n  };\n\n  var getLinkPath = layout === 'horizontal' ? sankeyLinkHorizontal() : sankeyLinkVertical();\n  return links.map(function (link) {\n    return React.createElement(SankeyLinksItem$1, {\n      key: \"\".concat(link.source.id, \".\").concat(link.target.id),\n      link: link,\n      layout: layout,\n      path: getLinkPath(link, linkContract),\n      color: link.color,\n      opacity: getOpacity(link),\n      blendMode: linkBlendMode,\n      enableGradient: enableLinkGradient,\n      setCurrent: setCurrentLink,\n      isInteractive: isInteractive,\n      onClick: onClick,\n      tooltip: tooltip,\n      tooltipFormat: tooltipFormat\n    });\n  });\n};\n\nvar SankeyLinks$1 = memo(SankeyLinks);\n\nvar SankeyLabels = function SankeyLabels(_ref) {\n  var nodes = _ref.nodes,\n      layout = _ref.layout,\n      width = _ref.width,\n      height = _ref.height,\n      labelPosition = _ref.labelPosition,\n      labelPadding = _ref.labelPadding,\n      labelOrientation = _ref.labelOrientation,\n      getLabelTextColor = _ref.getLabelTextColor;\n  var theme = useTheme();\n  var labelRotation = labelOrientation === 'vertical' ? -90 : 0;\n  var labels = nodes.map(function (node) {\n    var x;\n    var y;\n    var textAnchor;\n\n    if (layout === 'horizontal') {\n      y = node.y + node.height / 2;\n\n      if (node.x < width / 2) {\n        if (labelPosition === 'inside') {\n          x = node.x1 + labelPadding;\n          textAnchor = labelOrientation === 'vertical' ? 'middle' : 'start';\n        } else {\n          x = node.x - labelPadding;\n          textAnchor = labelOrientation === 'vertical' ? 'middle' : 'end';\n        }\n      } else {\n        if (labelPosition === 'inside') {\n          x = node.x - labelPadding;\n          textAnchor = labelOrientation === 'vertical' ? 'middle' : 'end';\n        } else {\n          x = node.x1 + labelPadding;\n          textAnchor = labelOrientation === 'vertical' ? 'middle' : 'start';\n        }\n      }\n    } else if (layout === 'vertical') {\n      x = node.x + node.width / 2;\n\n      if (node.y < height / 2) {\n        if (labelPosition === 'inside') {\n          y = node.y1 + labelPadding;\n          textAnchor = labelOrientation === 'vertical' ? 'end' : 'middle';\n        } else {\n          y = node.y - labelPadding;\n          textAnchor = labelOrientation === 'vertical' ? 'start' : 'middle';\n        }\n      } else {\n        if (labelPosition === 'inside') {\n          y = node.y - labelPadding;\n          textAnchor = labelOrientation === 'vertical' ? 'start' : 'middle';\n        } else {\n          y = node.y1 + labelPadding;\n          textAnchor = labelOrientation === 'vertical' ? 'end' : 'middle';\n        }\n      }\n    }\n\n    return {\n      id: node.id,\n      label: node.label,\n      x: x,\n      y: y,\n      textAnchor: textAnchor,\n      color: getLabelTextColor(node)\n    };\n  });\n\n  var _useMotionConfig = useMotionConfig(),\n      animate = _useMotionConfig.animate,\n      springConfig = _useMotionConfig.config;\n\n  var springs = useSprings(labels.length, labels.map(function (label) {\n    return {\n      transform: \"translate(\".concat(label.x, \", \").concat(label.y, \") rotate(\").concat(labelRotation, \")\"),\n      color: label.color,\n      config: springConfig,\n      immediate: !animate\n    };\n  }));\n  return springs.map(function (animatedProps, index) {\n    var label = labels[index];\n    return React.createElement(animated.text, {\n      key: label.id,\n      dominantBaseline: \"central\",\n      textAnchor: label.textAnchor,\n      transform: animatedProps.transform,\n      style: _objectSpread2(_objectSpread2({}, theme.labels.text), {}, {\n        fill: animatedProps.color,\n        pointerEvents: 'none'\n      })\n    }, label.label);\n  });\n};\n\nvar SankeyLabels$1 = memo(SankeyLabels);\n\nvar Sankey = function Sankey(_ref) {\n  var data = _ref.data,\n      layout = _ref.layout,\n      sort = _ref.sort,\n      align = _ref.align,\n      width = _ref.width,\n      height = _ref.height,\n      partialMargin = _ref.margin,\n      colors = _ref.colors,\n      nodeThickness = _ref.nodeThickness,\n      nodeSpacing = _ref.nodeSpacing,\n      nodeInnerPadding = _ref.nodeInnerPadding,\n      nodeBorderColor = _ref.nodeBorderColor,\n      nodeOpacity = _ref.nodeOpacity,\n      nodeHoverOpacity = _ref.nodeHoverOpacity,\n      nodeHoverOthersOpacity = _ref.nodeHoverOthersOpacity,\n      nodeBorderWidth = _ref.nodeBorderWidth,\n      linkOpacity = _ref.linkOpacity,\n      linkHoverOpacity = _ref.linkHoverOpacity,\n      linkHoverOthersOpacity = _ref.linkHoverOthersOpacity,\n      linkContract = _ref.linkContract,\n      linkBlendMode = _ref.linkBlendMode,\n      enableLinkGradient = _ref.enableLinkGradient,\n      enableLabels = _ref.enableLabels,\n      labelPosition = _ref.labelPosition,\n      labelPadding = _ref.labelPadding,\n      labelOrientation = _ref.labelOrientation,\n      label = _ref.label,\n      labelFormat = _ref.labelFormat,\n      labelTextColor = _ref.labelTextColor,\n      nodeTooltip = _ref.nodeTooltip,\n      linkTooltip = _ref.linkTooltip,\n      isInteractive = _ref.isInteractive,\n      onClick = _ref.onClick,\n      tooltipFormat = _ref.tooltipFormat,\n      legends = _ref.legends,\n      layers = _ref.layers,\n      role = _ref.role;\n\n  var _useDimensions = useDimensions(width, height, partialMargin),\n      margin = _useDimensions.margin,\n      innerWidth = _useDimensions.innerWidth,\n      innerHeight = _useDimensions.innerHeight,\n      outerWidth = _useDimensions.outerWidth,\n      outerHeight = _useDimensions.outerHeight;\n\n  var _useSankey = useSankey({\n    data: data,\n    layout: layout,\n    width: innerWidth,\n    height: innerHeight,\n    sort: sort,\n    align: align,\n    colors: colors,\n    nodeThickness: nodeThickness,\n    nodeSpacing: nodeSpacing,\n    nodeInnerPadding: nodeInnerPadding,\n    nodeBorderColor: nodeBorderColor,\n    label: label,\n    labelFormat: labelFormat,\n    labelTextColor: labelTextColor\n  }),\n      nodes = _useSankey.nodes,\n      links = _useSankey.links,\n      legendData = _useSankey.legendData,\n      getNodeBorderColor = _useSankey.getNodeBorderColor,\n      currentNode = _useSankey.currentNode,\n      setCurrentNode = _useSankey.setCurrentNode,\n      currentLink = _useSankey.currentLink,\n      setCurrentLink = _useSankey.setCurrentLink,\n      getLabelTextColor = _useSankey.getLabelTextColor;\n\n  var isCurrentNode = function isCurrentNode() {\n    return false;\n  };\n\n  var isCurrentLink = function isCurrentLink() {\n    return false;\n  };\n\n  if (currentLink) {\n    isCurrentNode = function isCurrentNode(_ref2) {\n      var id = _ref2.id;\n      return id === currentLink.source.id || id === currentLink.target.id;\n    };\n\n    isCurrentLink = function isCurrentLink(_ref3) {\n      var source = _ref3.source,\n          target = _ref3.target;\n      return source.id === currentLink.source.id && target.id === currentLink.target.id;\n    };\n  }\n\n  if (currentNode) {\n    var currentNodeIds = [currentNode.id];\n    links.filter(function (_ref4) {\n      var source = _ref4.source,\n          target = _ref4.target;\n      return source.id === currentNode.id || target.id === currentNode.id;\n    }).forEach(function (_ref5) {\n      var source = _ref5.source,\n          target = _ref5.target;\n      currentNodeIds.push(source.id);\n      currentNodeIds.push(target.id);\n    });\n    currentNodeIds = _uniq(currentNodeIds);\n\n    isCurrentNode = function isCurrentNode(_ref6) {\n      var id = _ref6.id;\n      return currentNodeIds.includes(id);\n    };\n\n    isCurrentLink = function isCurrentLink(_ref7) {\n      var source = _ref7.source,\n          target = _ref7.target;\n      return source.id === currentNode.id || target.id === currentNode.id;\n    };\n  }\n\n  var layerProps = {\n    links: links,\n    nodes: nodes,\n    margin: margin,\n    width: width,\n    height: height,\n    outerWidth: outerWidth,\n    outerHeight: outerHeight\n  };\n  var layerById = {\n    links: React.createElement(SankeyLinks$1, {\n      key: \"links\",\n      links: links,\n      layout: layout,\n      linkContract: linkContract,\n      linkOpacity: linkOpacity,\n      linkHoverOpacity: linkHoverOpacity,\n      linkHoverOthersOpacity: linkHoverOthersOpacity,\n      linkBlendMode: linkBlendMode,\n      enableLinkGradient: enableLinkGradient,\n      setCurrentLink: setCurrentLink,\n      currentNode: currentNode,\n      currentLink: currentLink,\n      isCurrentLink: isCurrentLink,\n      isInteractive: isInteractive,\n      onClick: onClick,\n      tooltip: linkTooltip,\n      tooltipFormat: tooltipFormat\n    }),\n    nodes: React.createElement(SankeyNodes$1, {\n      key: \"nodes\",\n      nodes: nodes,\n      nodeOpacity: nodeOpacity,\n      nodeHoverOpacity: nodeHoverOpacity,\n      nodeHoverOthersOpacity: nodeHoverOthersOpacity,\n      nodeBorderWidth: nodeBorderWidth,\n      getNodeBorderColor: getNodeBorderColor,\n      setCurrentNode: setCurrentNode,\n      currentNode: currentNode,\n      currentLink: currentLink,\n      isCurrentNode: isCurrentNode,\n      isInteractive: isInteractive,\n      onClick: onClick,\n      tooltip: nodeTooltip,\n      tooltipFormat: tooltipFormat\n    }),\n    labels: null,\n    legends: legends.map(function (legend, i) {\n      return React.createElement(BoxLegendSvg, Object.assign({\n        key: \"legend\".concat(i)\n      }, legend, {\n        containerWidth: innerWidth,\n        containerHeight: innerHeight,\n        data: legendData\n      }));\n    })\n  };\n\n  if (enableLabels) {\n    layerById.labels = React.createElement(SankeyLabels$1, {\n      key: \"labels\",\n      nodes: nodes,\n      layout: layout,\n      width: innerWidth,\n      height: innerHeight,\n      labelPosition: labelPosition,\n      labelPadding: labelPadding,\n      labelOrientation: labelOrientation,\n      getLabelTextColor: getLabelTextColor\n    });\n  }\n\n  return React.createElement(SvgWrapper, {\n    width: outerWidth,\n    height: outerHeight,\n    margin: margin,\n    role: role\n  }, layers.map(function (layer, i) {\n    if (typeof layer === 'function') {\n      return React.createElement(Fragment, {\n        key: i\n      }, layer(layerProps));\n    }\n\n    return layerById[layer];\n  }));\n};\n\nvar WrappedSankey = withContainer(Sankey);\nWrappedSankey.defaultProps = SankeyDefaultProps;\n\nvar ResponsiveSankey = function ResponsiveSankey(props) {\n  return React.createElement(ResponsiveWrapper, null, function (_ref) {\n    var width = _ref.width,\n        height = _ref.height;\n    return React.createElement(WrappedSankey, Object.assign({\n      width: width,\n      height: height\n    }, props));\n  });\n};\n\nexport { ResponsiveSankey, WrappedSankey as Sankey, SankeyDefaultProps, SankeyPropTypes, sankeyAlignmentFromProp, sankeyAlignmentPropKeys, sankeyAlignmentPropMapping, sankeyAlignmentPropType };","map":{"version":3,"sources":["../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../src/props.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../src/hooks.js","../src/SankeyNodesItem.js","../src/SankeyNodes.js","../src/SankeyLinkGradient.js","../src/SankeyLinksItem.js","../src/links.js","../src/SankeyLinks.js","../src/SankeyLabels.js","../src/Sankey.js","../src/ResponsiveSankey.js"],"names":["defineProperty","sankeyAlignmentPropMapping","center","justify","start","end","sankeyRight","sankeyAlignmentPropKeys","Object","sankeyAlignmentPropType","PropTypes","sankeyAlignmentFromProp","SankeyPropTypes","data","nodes","id","isRequired","links","source","target","layout","align","sort","colors","ordinalColorsPropType","nodeOpacity","nodeHoverOpacity","nodeHoverOthersOpacity","nodeThickness","nodeSpacing","nodeInnerPadding","nodeBorderWidth","nodeBorderColor","linkOpacity","linkHoverOpacity","linkHoverOthersOpacity","linkContract","linkBlendMode","blendModePropType","enableLinkGradient","enableLabels","labelPosition","labelPadding","labelOrientation","labelTextColor","label","labelFormat","nodeTooltip","linkTooltip","isInteractive","onClick","tooltipFormat","legends","layers","role","SankeyDefaultProps","scheme","from","modifiers","animate","motionConfig","arrayLikeToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","getId","d","computeNodeAndLinks","_data","alignFunction","sortFunction","linkSortMode","width","height","getColor","getLinkColor","getLabel","sankey","d3Sankey","node","Math","oldX0","oldX1","link","useSankey","currentNode","setCurrentNode","useState","currentLink","setCurrentLink","useMemo","a","b","theme","useTheme","useOrdinalColorScale","getNodeBorderColor","useInheritedColor","getLabelGenerator","getLabelTextColor","legendData","color","SankeyNodesItem","x","y","opacity","borderWidth","borderColor","setCurrent","tooltip","springConfig","useMotionConfig","animatedProps","useSpring","config","immediate","showTooltipFromEvent","hideTooltip","useTooltip","tooltipContent","handleMouseEnter","useCallback","handleMouseMove","handleMouseLeave","handleClick","to","undefined","memo","SankeyNodes","isCurrentNode","getOpacity","SankeyLinkGradient","startColor","endColor","gradientProps","tooltipStyles","container","display","alignItems","sourceChip","marginRight","targetChip","marginLeft","TooltipContent","format","SankeyLinksItem","path","blendMode","enableGradient","linkId","animatedPath","useAnimatedPath","encodeURI","mixBlendMode","sankeyLinkHorizontal","lineGenerator","line","thickness","n","contract","halfThickness","linkLength","padLength","dots","sankeyLinkVertical","SankeyLinks","isCurrentLink","getLinkPath","SankeyLabels","labelRotation","labels","textAnchor","springs","useSprings","transform","fill","pointerEvents","Sankey","margin","partialMargin","innerWidth","innerHeight","outerWidth","outerHeight","useDimensions","currentNodeIds","layerProps","layerById","i","layer","WrappedSankey","withContainer","ResponsiveSankey"],"mappings":"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","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphal Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport PropTypes from 'prop-types'\nimport { sankeyCenter, sankeyJustify, sankeyLeft, sankeyRight } from 'd3-sankey'\nimport { noop, blendModePropType, motionPropTypes } from '@nivo/core'\nimport { ordinalColorsPropType, inheritedColorPropType } from '@nivo/colors'\nimport { LegendPropShape } from '@nivo/legends'\n\nexport const sankeyAlignmentPropMapping = {\n    center: sankeyCenter,\n    justify: sankeyJustify,\n    start: sankeyLeft,\n    end: sankeyRight,\n}\n\nexport const sankeyAlignmentPropKeys = Object.keys(sankeyAlignmentPropMapping)\n\nexport const sankeyAlignmentPropType = PropTypes.oneOf(sankeyAlignmentPropKeys)\n\nexport const sankeyAlignmentFromProp = prop => sankeyAlignmentPropMapping[prop]\n\nexport const SankeyPropTypes = {\n    data: PropTypes.shape({\n        nodes: PropTypes.arrayOf(\n            PropTypes.shape({\n                id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n            })\n        ).isRequired,\n        links: PropTypes.arrayOf(\n            PropTypes.shape({\n                source: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n                target: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n            })\n        ).isRequired,\n    }).isRequired,\n\n    layout: PropTypes.oneOf(['horizontal', 'vertical']).isRequired,\n    align: sankeyAlignmentPropType.isRequired,\n    sort: PropTypes.oneOfType([\n        PropTypes.oneOf(['auto', 'input', 'ascending', 'descending']),\n        PropTypes.func,\n    ]).isRequired,\n\n    colors: ordinalColorsPropType.isRequired,\n\n    nodeOpacity: PropTypes.number.isRequired,\n    nodeHoverOpacity: PropTypes.number.isRequired,\n    nodeHoverOthersOpacity: PropTypes.number.isRequired,\n    nodeThickness: PropTypes.number.isRequired,\n    nodeSpacing: PropTypes.number.isRequired,\n    nodeInnerPadding: PropTypes.number.isRequired,\n    nodeBorderWidth: PropTypes.number.isRequired,\n    nodeBorderColor: inheritedColorPropType,\n\n    linkOpacity: PropTypes.number.isRequired,\n    linkHoverOpacity: PropTypes.number.isRequired,\n    linkHoverOthersOpacity: PropTypes.number.isRequired,\n    linkContract: PropTypes.number.isRequired,\n    linkBlendMode: blendModePropType.isRequired,\n    enableLinkGradient: PropTypes.bool.isRequired,\n\n    enableLabels: PropTypes.bool.isRequired,\n    labelPosition: PropTypes.oneOf(['inside', 'outside']).isRequired,\n    labelPadding: PropTypes.number.isRequired,\n    labelOrientation: PropTypes.oneOf(['horizontal', 'vertical']).isRequired,\n    labelTextColor: inheritedColorPropType,\n    label: PropTypes.oneOfType([PropTypes.string, PropTypes.func]).isRequired,\n    labelFormat: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n\n    nodeTooltip: PropTypes.func,\n    linkTooltip: PropTypes.func,\n\n    isInteractive: PropTypes.bool.isRequired,\n    onClick: PropTypes.func.isRequired,\n    tooltipFormat: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\n    legends: PropTypes.arrayOf(PropTypes.shape(LegendPropShape)).isRequired,\n\n    layers: PropTypes.arrayOf(\n        PropTypes.oneOfType([\n            PropTypes.oneOf(['links', 'nodes', 'labels', 'legends']),\n            PropTypes.func,\n        ])\n    ).isRequired,\n\n    role: PropTypes.string.isRequired,\n\n    ...motionPropTypes,\n}\n\nexport const SankeyDefaultProps = {\n    layout: 'horizontal',\n    align: 'center',\n    sort: 'auto',\n\n    colors: { scheme: 'nivo' },\n\n    nodeOpacity: 0.75,\n    nodeHoverOpacity: 1,\n    nodeHoverOthersOpacity: 0.15,\n    nodeThickness: 12,\n    nodeSpacing: 12,\n    nodeInnerPadding: 0,\n    nodeBorderWidth: 1,\n    nodeBorderColor: { from: 'color', modifiers: [['darker', 0.5]] },\n\n    linkOpacity: 0.25,\n    linkHoverOpacity: 0.6,\n    linkHoverOthersOpacity: 0.15,\n    linkContract: 0,\n    linkBlendMode: 'multiply',\n    enableLinkGradient: false,\n\n    enableLabels: true,\n    label: 'id',\n    labelPosition: 'inside',\n    labelPadding: 9,\n    labelOrientation: 'horizontal',\n    labelTextColor: { from: 'color', modifiers: [['darker', 0.8]] },\n\n    isInteractive: true,\n    onClick: noop,\n\n    legends: [],\n\n    layers: ['links', 'nodes', 'labels', 'legends'],\n\n    role: 'img',\n\n    animate: true,\n    motionConfig: 'gentle',\n}\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import { useState, useMemo } from 'react'\nimport { cloneDeep } from 'lodash'\nimport { sankey as d3Sankey } from 'd3-sankey'\nimport { useTheme, getLabelGenerator } from '@nivo/core'\nimport { useOrdinalColorScale, useInheritedColor } from '@nivo/colors'\nimport { sankeyAlignmentFromProp } from './props'\n\nconst getId = d => d.id\n\nexport const computeNodeAndLinks = ({\n    data: _data,\n    layout,\n    alignFunction,\n    sortFunction,\n    linkSortMode,\n    nodeThickness,\n    nodeSpacing,\n    nodeInnerPadding,\n    width,\n    height,\n    getColor,\n    getLinkColor,\n    getLabel,\n}) => {\n    const sankey = d3Sankey()\n        .nodeAlign(alignFunction)\n        .nodeSort(sortFunction)\n        .linkSort(linkSortMode)\n        .nodeWidth(nodeThickness)\n        .nodePadding(nodeSpacing)\n        .size(layout === 'horizontal' ? [width, height] : [height, width])\n        .nodeId(getId)\n\n    // deep clone is required as the sankey diagram mutates data\n    // we need a different identity for correct updates\n    const data = cloneDeep(_data)\n    sankey(data)\n\n    data.nodes.forEach(node => {\n        node.color = getColor(node)\n        node.label = getLabel(node)\n        if (layout === 'horizontal') {\n            node.x = node.x0 + nodeInnerPadding\n            node.y = node.y0\n            node.width = Math.max(node.x1 - node.x0 - nodeInnerPadding * 2, 0)\n            node.height = Math.max(node.y1 - node.y0, 0)\n        } else {\n            node.x = node.y0\n            node.y = node.x0 + nodeInnerPadding\n            node.width = Math.max(node.y1 - node.y0, 0)\n            node.height = Math.max(node.x1 - node.x0 - nodeInnerPadding * 2, 0)\n\n            const oldX0 = node.x0\n            const oldX1 = node.x1\n\n            node.x0 = node.y0\n            node.x1 = node.y1\n            node.y0 = oldX0\n            node.y1 = oldX1\n        }\n    })\n\n    data.links.forEach(link => {\n        link.color = getLinkColor(link)\n        link.pos0 = link.y0\n        link.pos1 = link.y1\n        link.thickness = link.width\n        delete link.y0\n        delete link.y1\n        delete link.width\n    })\n\n    return data\n}\n\nexport const useSankey = ({\n    data,\n    layout,\n    width,\n    height,\n    sort,\n    align,\n    colors,\n    nodeThickness,\n    nodeSpacing,\n    nodeInnerPadding,\n    nodeBorderColor,\n    label,\n    labelFormat,\n    labelTextColor,\n}) => {\n    const [currentNode, setCurrentNode] = useState(null)\n    const [currentLink, setCurrentLink] = useState(null)\n\n    const sortFunction = useMemo(() => {\n        if (sort === 'auto') return undefined\n        if (sort === 'input') return null\n        if (sort === 'ascending') return (a, b) => a.value - b.value\n        if (sort === 'descending') return (a, b) => b.value - a.value\n\n        return sort\n    }, [sort])\n\n    // If \"input\" sorting is used, apply this setting to links, too.\n    // (In d3, `null` means input sorting and `undefined` is the default)\n    const linkSortMode = sort === 'input' ? null : undefined\n\n    const alignFunction = useMemo(() => sankeyAlignmentFromProp(align), [align])\n\n    const theme = useTheme()\n\n    const getColor = useOrdinalColorScale(colors, 'id')\n    const getNodeBorderColor = useInheritedColor(nodeBorderColor, theme)\n    const getLinkColor = useOrdinalColorScale(colors, 'source.id')\n\n    const getLabel = useMemo(() => getLabelGenerator(label, labelFormat), [label, labelFormat])\n    const getLabelTextColor = useInheritedColor(labelTextColor, theme)\n\n    const { nodes, links } = useMemo(\n        () =>\n            computeNodeAndLinks({\n                data,\n                layout,\n                alignFunction,\n                sortFunction,\n                linkSortMode,\n                nodeThickness,\n                nodeSpacing,\n                nodeInnerPadding,\n                width,\n                height,\n                getColor,\n                getLinkColor,\n                getLabel,\n            }),\n        [\n            data,\n            layout,\n            alignFunction,\n            sortFunction,\n            linkSortMode,\n            nodeThickness,\n            nodeSpacing,\n            nodeInnerPadding,\n            width,\n            height,\n            getColor,\n            getLinkColor,\n            getLabel,\n        ]\n    )\n\n    const legendData = useMemo(\n        () =>\n            nodes.map(node => ({\n                id: node.id,\n                label: node.label,\n                color: node.color,\n            })),\n        [nodes]\n    )\n\n    return {\n        nodes,\n        links,\n        legendData,\n        getNodeBorderColor,\n        currentNode,\n        setCurrentNode,\n        currentLink,\n        setCurrentLink,\n        getLabelTextColor,\n    }\n}\n","/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphal Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport React, { memo, useCallback, useMemo } from 'react'\nimport PropTypes from 'prop-types'\nimport { useSpring, animated, to } from 'react-spring'\nimport { useMotionConfig } from '@nivo/core'\nimport { BasicTooltip, useTooltip } from '@nivo/tooltip'\n\nconst SankeyNodesItem = ({\n    node,\n    x,\n    y,\n    width,\n    height,\n    color,\n    opacity,\n    borderWidth,\n    borderColor,\n    setCurrent,\n    isInteractive,\n    onClick,\n    tooltip,\n}) => {\n    const { animate, config: springConfig } = useMotionConfig()\n    const animatedProps = useSpring({\n        x,\n        y,\n        width,\n        height,\n        opacity,\n        color,\n        config: springConfig,\n        immediate: !animate,\n    })\n\n    const { showTooltipFromEvent, hideTooltip } = useTooltip()\n\n    const tooltipContent = useMemo(() => {\n        if (tooltip) {\n            return <BasicTooltip id={tooltip(node)} enableChip={false} />\n        }\n\n        return <BasicTooltip id={node.label} enableChip={true} color={node.color} />\n    }, [tooltip, node])\n\n    const handleMouseEnter = useCallback(\n        event => {\n            setCurrent(node)\n            showTooltipFromEvent(tooltipContent, event, 'left')\n        },\n        [setCurrent, node, showTooltipFromEvent, tooltipContent]\n    )\n\n    const handleMouseMove = useCallback(\n        event => {\n            showTooltipFromEvent(tooltipContent, event, 'left')\n        },\n        [showTooltipFromEvent, tooltipContent]\n    )\n\n    const handleMouseLeave = useCallback(() => {\n        setCurrent(null)\n        hideTooltip()\n    }, [setCurrent, hideTooltip])\n\n    const handleClick = useCallback(\n        event => {\n            onClick(node, event)\n        },\n        [onClick, node]\n    )\n\n    return (\n        <animated.rect\n            x={animatedProps.x}\n            y={animatedProps.y}\n            width={to(animatedProps.width, v => Math.max(v, 0))}\n            height={to(animatedProps.height, v => Math.max(v, 0))}\n            fill={animatedProps.color}\n            fillOpacity={animatedProps.opacity}\n            strokeWidth={borderWidth}\n            stroke={borderColor}\n            strokeOpacity={opacity}\n            onMouseEnter={isInteractive ? handleMouseEnter : undefined}\n            onMouseMove={isInteractive ? handleMouseMove : undefined}\n            onMouseLeave={isInteractive ? handleMouseLeave : undefined}\n            onClick={isInteractive ? handleClick : undefined}\n        />\n    )\n}\n\nSankeyNodesItem.propTypes = {\n    node: PropTypes.shape({\n        id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n        label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n        color: PropTypes.string.isRequired,\n    }),\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    color: PropTypes.string.isRequired,\n    opacity: PropTypes.number.isRequired,\n    borderWidth: PropTypes.number.isRequired,\n    borderColor: PropTypes.string.isRequired,\n    setCurrent: PropTypes.func.isRequired,\n    isInteractive: PropTypes.bool.isRequired,\n    onClick: PropTypes.func.isRequired,\n    tooltip: PropTypes.func,\n}\n\nexport default memo(SankeyNodesItem)\n","/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphal Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport React, { memo } from 'react'\nimport PropTypes from 'prop-types'\nimport SankeyNodesItem from './SankeyNodesItem'\n\nconst SankeyNodes = ({\n    nodes,\n    nodeOpacity,\n    nodeHoverOpacity,\n    nodeHoverOthersOpacity,\n    nodeBorderWidth,\n    getNodeBorderColor,\n    setCurrentNode,\n    currentNode,\n    currentLink,\n    isCurrentNode,\n    isInteractive,\n    onClick,\n    tooltip,\n}) => {\n    const getOpacity = node => {\n        if (!currentNode && !currentLink) return nodeOpacity\n        if (isCurrentNode(node)) return nodeHoverOpacity\n        return nodeHoverOthersOpacity\n    }\n\n    return nodes.map(node => (\n        <SankeyNodesItem\n            key={node.id}\n            node={node}\n            x={node.x}\n            y={node.y}\n            width={node.width}\n            height={node.height}\n            color={node.color}\n            opacity={getOpacity(node)}\n            borderWidth={nodeBorderWidth}\n            borderColor={getNodeBorderColor(node)}\n            setCurrent={setCurrentNode}\n            isInteractive={isInteractive}\n            onClick={onClick}\n            tooltip={tooltip}\n        />\n    ))\n}\n\nSankeyNodes.propTypes = {\n    nodes: PropTypes.arrayOf(\n        PropTypes.shape({\n            id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n            x: PropTypes.number.isRequired,\n            y: PropTypes.number.isRequired,\n            width: PropTypes.number.isRequired,\n            height: PropTypes.number.isRequired,\n            color: PropTypes.string.isRequired,\n        })\n    ).isRequired,\n    nodeOpacity: PropTypes.number.isRequired,\n    nodeHoverOpacity: PropTypes.number.isRequired,\n    nodeHoverOthersOpacity: PropTypes.number.isRequired,\n    nodeBorderWidth: PropTypes.number.isRequired,\n    getNodeBorderColor: PropTypes.func.isRequired,\n    tooltip: PropTypes.func,\n    setCurrentNode: PropTypes.func.isRequired,\n    currentNode: PropTypes.object,\n    currentLink: PropTypes.object,\n    isCurrentNode: PropTypes.func.isRequired,\n    isInteractive: PropTypes.bool.isRequired,\n    onClick: PropTypes.func.isRequired,\n}\n\nexport default memo(SankeyNodes)\n","/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphal Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport React, { memo } from 'react'\nimport PropTypes from 'prop-types'\n\nconst SankeyLinkGradient = memo(({ id, layout, startColor, endColor }) => {\n    const gradientProps = {}\n    if (layout === 'horizontal') {\n        gradientProps.x1 = '0%'\n        gradientProps.x2 = '100%'\n        gradientProps.y1 = '0%'\n        gradientProps.y2 = '0%'\n    } else {\n        gradientProps.x1 = '0%'\n        gradientProps.x2 = '0%'\n        gradientProps.y1 = '0%'\n        gradientProps.y2 = '100%'\n    }\n\n    return (\n        <linearGradient id={id} spreadMethod=\"pad\" {...gradientProps}>\n            <stop offset=\"0%\" stopColor={startColor} />\n            <stop offset=\"100%\" stopColor={endColor} />\n        </linearGradient>\n    )\n})\n\nSankeyLinkGradient.propTypes = {\n    id: PropTypes.string.isRequired,\n    layout: PropTypes.oneOf(['horizontal', 'vertical']).isRequired,\n    startColor: PropTypes.string.isRequired,\n    endColor: PropTypes.string.isRequired,\n}\n\nSankeyLinkGradient.displayName = 'SankeyLinkGradient'\n\nexport default SankeyLinkGradient\n","/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphal Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport React, { memo, useCallback, useMemo } from 'react'\nimport PropTypes from 'prop-types'\nimport { useSpring, animated } from 'react-spring'\nimport { blendModePropType, useAnimatedPath, useMotionConfig } from '@nivo/core'\nimport { BasicTooltip, Chip, useTooltip } from '@nivo/tooltip'\nimport SankeyLinkGradient from './SankeyLinkGradient'\n\nconst tooltipStyles = {\n    container: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    sourceChip: {\n        marginRight: 7,\n    },\n    targetChip: {\n        marginLeft: 7,\n        marginRight: 7,\n    },\n}\n\nconst TooltipContent = ({ link, format }) => (\n    <span style={tooltipStyles.container}>\n        <Chip color={link.source.color} style={tooltipStyles.sourceChip} />\n        <strong>{link.source.label}</strong>\n        {' > '}\n        <strong>{link.target.label}</strong>\n        <Chip color={link.target.color} style={tooltipStyles.targetChip} />\n        <strong>{format ? format(link.value) : link.value}</strong>\n    </span>\n)\n\nTooltipContent.propTypes = {\n    link: PropTypes.shape({\n        source: PropTypes.shape({\n            id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n            label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n            color: PropTypes.string.isRequired,\n        }).isRequired,\n        target: PropTypes.shape({\n            id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n            label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n            color: PropTypes.string.isRequired,\n        }).isRequired,\n        color: PropTypes.string.isRequired,\n        value: PropTypes.number.isRequired,\n    }).isRequired,\n    format: PropTypes.func,\n}\n\nconst SankeyLinksItem = ({\n    link,\n    layout,\n    path,\n    color,\n    opacity,\n    blendMode,\n    enableGradient,\n    setCurrent,\n    tooltip,\n    tooltipFormat,\n    isInteractive,\n    onClick,\n}) => {\n    const linkId = `${link.source.id}.${link.target.id}`\n\n    const { animate, config: springConfig } = useMotionConfig()\n    const animatedPath = useAnimatedPath(path)\n    const animatedProps = useSpring({\n        color,\n        opacity,\n        config: springConfig,\n        immediate: !animate,\n    })\n\n    const { showTooltipFromEvent, hideTooltip } = useTooltip()\n\n    const tooltipContent = useMemo(() => {\n        if (tooltip) {\n            return <BasicTooltip id={tooltip(link)} enableChip={false} />\n        }\n\n        return <BasicTooltip id={<TooltipContent format={tooltipFormat} link={link} />} />\n    }, [tooltip, tooltipFormat, link])\n\n    const handleMouseEnter = useCallback(\n        event => {\n            setCurrent(link)\n            showTooltipFromEvent(tooltipContent, event, 'left')\n        },\n        [setCurrent, link, showTooltipFromEvent, tooltipContent]\n    )\n\n    const handleMouseMove = useCallback(\n        event => {\n            showTooltipFromEvent(tooltipContent, event, 'left')\n        },\n        [showTooltipFromEvent, tooltipContent]\n    )\n\n    const handleMouseLeave = useCallback(() => {\n        setCurrent(null)\n        hideTooltip()\n    }, [setCurrent, hideTooltip])\n\n    const handleClick = useCallback(\n        event => {\n            onClick(link, event)\n        },\n        [onClick, link]\n    )\n\n    return (\n        <>\n            {enableGradient && (\n                <SankeyLinkGradient\n                    id={linkId}\n                    layout={layout}\n                    startColor={link.startColor || link.source.color}\n                    endColor={link.endColor || link.target.color}\n                />\n            )}\n            <animated.path\n                fill={enableGradient ? `url(\"#${encodeURI(linkId)}\")` : animatedProps.color}\n                d={animatedPath}\n                fillOpacity={animatedProps.opacity}\n                onMouseEnter={isInteractive ? handleMouseEnter : undefined}\n                onMouseMove={isInteractive ? handleMouseMove : undefined}\n                onMouseLeave={isInteractive ? handleMouseLeave : undefined}\n                onClick={isInteractive ? handleClick : undefined}\n                style={{ mixBlendMode: blendMode }}\n            />\n        </>\n    )\n}\n\nSankeyLinksItem.propTypes = {\n    link: PropTypes.shape({\n        source: PropTypes.shape({\n            id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n            label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n            color: PropTypes.string.isRequired,\n        }).isRequired,\n        target: PropTypes.shape({\n            id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n            label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n            color: PropTypes.string.isRequired,\n        }).isRequired,\n        color: PropTypes.string.isRequired,\n        value: PropTypes.number.isRequired,\n        startColor: PropTypes.string,\n        endColor: PropTypes.string,\n    }).isRequired,\n    layout: PropTypes.oneOf(['horizontal', 'vertical']).isRequired,\n    path: PropTypes.string.isRequired,\n    color: PropTypes.string.isRequired,\n    opacity: PropTypes.number.isRequired,\n    blendMode: blendModePropType.isRequired,\n    enableGradient: PropTypes.bool.isRequired,\n    setCurrent: PropTypes.func.isRequired,\n    isInteractive: PropTypes.bool.isRequired,\n    onClick: PropTypes.func.isRequired,\n    tooltip: PropTypes.func,\n    tooltipFormat: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n}\n\nexport default memo(SankeyLinksItem)\n","/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphal Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport { line, curveMonotoneX, curveMonotoneY } from 'd3-shape'\n\nexport const sankeyLinkHorizontal = () => {\n    const lineGenerator = line().curve(curveMonotoneX)\n\n    return (n, contract) => {\n        const thickness = Math.max(1, n.thickness - contract * 2)\n        const halfThickness = thickness / 2\n        const linkLength = n.target.x0 - n.source.x1\n        const padLength = linkLength * 0.12\n\n        const dots = [\n            [n.source.x1, n.pos0 - halfThickness],\n            [n.source.x1 + padLength, n.pos0 - halfThickness],\n            [n.target.x0 - padLength, n.pos1 - halfThickness],\n            [n.target.x0, n.pos1 - halfThickness],\n            [n.target.x0, n.pos1 + halfThickness],\n            [n.target.x0 - padLength, n.pos1 + halfThickness],\n            [n.source.x1 + padLength, n.pos0 + halfThickness],\n            [n.source.x1, n.pos0 + halfThickness],\n            [n.source.x1, n.pos0 - halfThickness],\n        ]\n\n        return lineGenerator(dots) + 'Z'\n    }\n}\n\nexport const sankeyLinkVertical = () => {\n    const lineGenerator = line().curve(curveMonotoneY)\n\n    return (n, contract) => {\n        const thickness = Math.max(1, n.thickness - contract * 2)\n        const halfThickness = thickness / 2\n        const linkLength = n.target.y0 - n.source.y1\n        const padLength = linkLength * 0.12\n\n        const dots = [\n            [n.pos0 + halfThickness, n.source.y1],\n            [n.pos0 + halfThickness, n.source.y1 + padLength],\n            [n.pos1 + halfThickness, n.target.y0 - padLength],\n            [n.pos1 + halfThickness, n.target.y0],\n            [n.pos1 - halfThickness, n.target.y0],\n            [n.pos1 - halfThickness, n.target.y0 - padLength],\n            [n.pos0 - halfThickness, n.source.y1 + padLength],\n            [n.pos0 - halfThickness, n.source.y1],\n            [n.pos0 + halfThickness, n.source.y1],\n        ]\n\n        return lineGenerator(dots) + 'Z'\n    }\n}\n","/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphal Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport React, { memo } from 'react'\nimport PropTypes from 'prop-types'\nimport { blendModePropType } from '@nivo/core'\nimport SankeyLinksItem from './SankeyLinksItem'\nimport { sankeyLinkHorizontal, sankeyLinkVertical } from './links'\n\nconst SankeyLinks = ({\n    links,\n    layout,\n    linkOpacity,\n    linkHoverOpacity,\n    linkHoverOthersOpacity,\n    linkContract,\n    linkBlendMode,\n    enableLinkGradient,\n    setCurrentLink,\n    currentNode,\n    currentLink,\n    isCurrentLink,\n    isInteractive,\n    onClick,\n    tooltipFormat,\n    tooltip,\n}) => {\n    const getOpacity = link => {\n        if (!currentNode && !currentLink) return linkOpacity\n        if (isCurrentLink(link)) return linkHoverOpacity\n        return linkHoverOthersOpacity\n    }\n\n    const getLinkPath = layout === 'horizontal' ? sankeyLinkHorizontal() : sankeyLinkVertical()\n\n    return links.map(link => (\n        <SankeyLinksItem\n            key={`${link.source.id}.${link.target.id}`}\n            link={link}\n            layout={layout}\n            path={getLinkPath(link, linkContract)}\n            color={link.color}\n            opacity={getOpacity(link)}\n            blendMode={linkBlendMode}\n            enableGradient={enableLinkGradient}\n            setCurrent={setCurrentLink}\n            isInteractive={isInteractive}\n            onClick={onClick}\n            tooltip={tooltip}\n            tooltipFormat={tooltipFormat}\n        />\n    ))\n}\n\nSankeyLinks.propTypes = {\n    layout: PropTypes.oneOf(['horizontal', 'vertical']).isRequired,\n    links: PropTypes.arrayOf(\n        PropTypes.shape({\n            source: PropTypes.shape({\n                id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n                label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n            }).isRequired,\n            target: PropTypes.shape({\n                id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n                label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n            }).isRequired,\n            thickness: PropTypes.number.isRequired,\n            color: PropTypes.string.isRequired,\n        })\n    ).isRequired,\n    linkOpacity: PropTypes.number.isRequired,\n    linkHoverOpacity: PropTypes.number.isRequired,\n    linkHoverOthersOpacity: PropTypes.number.isRequired,\n    linkContract: PropTypes.number.isRequired,\n    linkBlendMode: blendModePropType.isRequired,\n    enableLinkGradient: PropTypes.bool.isRequired,\n    tooltip: PropTypes.func,\n    setCurrentLink: PropTypes.func.isRequired,\n    currentLink: PropTypes.object,\n    isCurrentLink: PropTypes.func.isRequired,\n    isInteractive: PropTypes.bool.isRequired,\n    onClick: PropTypes.func.isRequired,\n}\n\nexport default memo(SankeyLinks)\n","/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphal Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport React, { memo } from 'react'\nimport PropTypes from 'prop-types'\nimport { useSprings, animated } from 'react-spring'\nimport { useTheme, useMotionConfig } from '@nivo/core'\n\nconst SankeyLabels = ({\n    nodes,\n    layout,\n    width,\n    height,\n    labelPosition,\n    labelPadding,\n    labelOrientation,\n    getLabelTextColor,\n}) => {\n    const theme = useTheme()\n\n    const labelRotation = labelOrientation === 'vertical' ? -90 : 0\n    const labels = nodes.map(node => {\n        let x\n        let y\n        let textAnchor\n        if (layout === 'horizontal') {\n            y = node.y + node.height / 2\n            if (node.x < width / 2) {\n                if (labelPosition === 'inside') {\n                    x = node.x1 + labelPadding\n                    textAnchor = labelOrientation === 'vertical' ? 'middle' : 'start'\n                } else {\n                    x = node.x - labelPadding\n                    textAnchor = labelOrientation === 'vertical' ? 'middle' : 'end'\n                }\n            } else {\n                if (labelPosition === 'inside') {\n                    x = node.x - labelPadding\n                    textAnchor = labelOrientation === 'vertical' ? 'middle' : 'end'\n                } else {\n                    x = node.x1 + labelPadding\n                    textAnchor = labelOrientation === 'vertical' ? 'middle' : 'start'\n                }\n            }\n        } else if (layout === 'vertical') {\n            x = node.x + node.width / 2\n            if (node.y < height / 2) {\n                if (labelPosition === 'inside') {\n                    y = node.y1 + labelPadding\n                    textAnchor = labelOrientation === 'vertical' ? 'end' : 'middle'\n                } else {\n                    y = node.y - labelPadding\n                    textAnchor = labelOrientation === 'vertical' ? 'start' : 'middle'\n                }\n            } else {\n                if (labelPosition === 'inside') {\n                    y = node.y - labelPadding\n                    textAnchor = labelOrientation === 'vertical' ? 'start' : 'middle'\n                } else {\n                    y = node.y1 + labelPadding\n                    textAnchor = labelOrientation === 'vertical' ? 'end' : 'middle'\n                }\n            }\n        }\n\n        return {\n            id: node.id,\n            label: node.label,\n            x,\n            y,\n            textAnchor,\n            color: getLabelTextColor(node),\n        }\n    })\n\n    const { animate, config: springConfig } = useMotionConfig()\n    const springs = useSprings(\n        labels.length,\n        labels.map(label => ({\n            transform: `translate(${label.x}, ${label.y}) rotate(${labelRotation})`,\n            color: label.color,\n            config: springConfig,\n            immediate: !animate,\n        }))\n    )\n\n    return springs.map((animatedProps, index) => {\n        const label = labels[index]\n\n        return (\n            <animated.text\n                key={label.id}\n                dominantBaseline=\"central\"\n                textAnchor={label.textAnchor}\n                transform={animatedProps.transform}\n                style={{\n                    ...theme.labels.text,\n                    fill: animatedProps.color,\n                    pointerEvents: 'none',\n                }}\n            >\n                {label.label}\n            </animated.text>\n        )\n    })\n}\n\nSankeyLabels.propTypes = {\n    nodes: PropTypes.arrayOf(\n        PropTypes.shape({\n            id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n            label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n            x1: PropTypes.number.isRequired,\n            x: PropTypes.number.isRequired,\n            y: PropTypes.number.isRequired,\n            width: PropTypes.number.isRequired,\n            height: PropTypes.number.isRequired,\n        })\n    ).isRequired,\n    layout: PropTypes.oneOf(['horizontal', 'vertical']).isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    labelPosition: PropTypes.oneOf(['inside', 'outside']).isRequired,\n    labelPadding: PropTypes.number.isRequired,\n    labelOrientation: PropTypes.oneOf(['horizontal', 'vertical']).isRequired,\n    getLabelTextColor: PropTypes.func.isRequired,\n}\n\nexport default memo(SankeyLabels)\n","/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphal Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport React, { Fragment } from 'react'\nimport { uniq } from 'lodash'\nimport { SvgWrapper, useDimensions, withContainer } from '@nivo/core'\nimport { BoxLegendSvg } from '@nivo/legends'\nimport { SankeyDefaultProps, SankeyPropTypes } from './props'\nimport { useSankey } from './hooks'\nimport SankeyNodes from './SankeyNodes'\nimport SankeyLinks from './SankeyLinks'\nimport SankeyLabels from './SankeyLabels'\n\nconst Sankey = ({\n    data,\n    layout,\n    sort,\n    align,\n    width,\n    height,\n    margin: partialMargin,\n    colors,\n    nodeThickness,\n    nodeSpacing,\n    nodeInnerPadding,\n    nodeBorderColor,\n    nodeOpacity,\n    nodeHoverOpacity,\n    nodeHoverOthersOpacity,\n    nodeBorderWidth,\n    linkOpacity,\n    linkHoverOpacity,\n    linkHoverOthersOpacity,\n    linkContract,\n    linkBlendMode,\n    enableLinkGradient,\n    enableLabels,\n    labelPosition,\n    labelPadding,\n    labelOrientation,\n    label,\n    labelFormat,\n    labelTextColor,\n    nodeTooltip,\n    linkTooltip,\n    isInteractive,\n    onClick,\n    tooltipFormat,\n    legends,\n    layers,\n    role,\n}) => {\n    const { margin, innerWidth, innerHeight, outerWidth, outerHeight } = useDimensions(\n        width,\n        height,\n        partialMargin\n    )\n\n    const {\n        nodes,\n        links,\n        legendData,\n        getNodeBorderColor,\n        currentNode,\n        setCurrentNode,\n        currentLink,\n        setCurrentLink,\n        getLabelTextColor,\n    } = useSankey({\n        data,\n        layout,\n        width: innerWidth,\n        height: innerHeight,\n        sort,\n        align,\n        colors,\n        nodeThickness,\n        nodeSpacing,\n        nodeInnerPadding,\n        nodeBorderColor,\n        label,\n        labelFormat,\n        labelTextColor,\n    })\n\n    let isCurrentNode = () => false\n    let isCurrentLink = () => false\n\n    if (currentLink) {\n        isCurrentNode = ({ id }) => id === currentLink.source.id || id === currentLink.target.id\n        isCurrentLink = ({ source, target }) =>\n            source.id === currentLink.source.id && target.id === currentLink.target.id\n    }\n\n    if (currentNode) {\n        let currentNodeIds = [currentNode.id]\n        links\n            .filter(\n                ({ source, target }) => source.id === currentNode.id || target.id === currentNode.id\n            )\n            .forEach(({ source, target }) => {\n                currentNodeIds.push(source.id)\n                currentNodeIds.push(target.id)\n            })\n\n        currentNodeIds = uniq(currentNodeIds)\n        isCurrentNode = ({ id }) => currentNodeIds.includes(id)\n        isCurrentLink = ({ source, target }) =>\n            source.id === currentNode.id || target.id === currentNode.id\n    }\n\n    const layerProps = {\n        links,\n        nodes,\n        margin,\n        width,\n        height,\n        outerWidth,\n        outerHeight,\n    }\n\n    const layerById = {\n        links: (\n            <SankeyLinks\n                key=\"links\"\n                links={links}\n                layout={layout}\n                linkContract={linkContract}\n                linkOpacity={linkOpacity}\n                linkHoverOpacity={linkHoverOpacity}\n                linkHoverOthersOpacity={linkHoverOthersOpacity}\n                linkBlendMode={linkBlendMode}\n                enableLinkGradient={enableLinkGradient}\n                setCurrentLink={setCurrentLink}\n                currentNode={currentNode}\n                currentLink={currentLink}\n                isCurrentLink={isCurrentLink}\n                isInteractive={isInteractive}\n                onClick={onClick}\n                tooltip={linkTooltip}\n                tooltipFormat={tooltipFormat}\n            />\n        ),\n        nodes: (\n            <SankeyNodes\n                key=\"nodes\"\n                nodes={nodes}\n                nodeOpacity={nodeOpacity}\n                nodeHoverOpacity={nodeHoverOpacity}\n                nodeHoverOthersOpacity={nodeHoverOthersOpacity}\n                nodeBorderWidth={nodeBorderWidth}\n                getNodeBorderColor={getNodeBorderColor}\n                setCurrentNode={setCurrentNode}\n                currentNode={currentNode}\n                currentLink={currentLink}\n                isCurrentNode={isCurrentNode}\n                isInteractive={isInteractive}\n                onClick={onClick}\n                tooltip={nodeTooltip}\n                tooltipFormat={tooltipFormat}\n            />\n        ),\n        labels: null,\n        legends: legends.map((legend, i) => (\n            <BoxLegendSvg\n                key={`legend${i}`}\n                {...legend}\n                containerWidth={innerWidth}\n                containerHeight={innerHeight}\n                data={legendData}\n            />\n        )),\n    }\n\n    if (enableLabels) {\n        layerById.labels = (\n            <SankeyLabels\n                key=\"labels\"\n                nodes={nodes}\n                layout={layout}\n                width={innerWidth}\n                height={innerHeight}\n                labelPosition={labelPosition}\n                labelPadding={labelPadding}\n                labelOrientation={labelOrientation}\n                getLabelTextColor={getLabelTextColor}\n            />\n        )\n    }\n\n    return (\n        <SvgWrapper width={outerWidth} height={outerHeight} margin={margin} role={role}>\n            {layers.map((layer, i) => {\n                if (typeof layer === 'function') {\n                    return <Fragment key={i}>{layer(layerProps)}</Fragment>\n                }\n\n                return layerById[layer]\n            })}\n        </SvgWrapper>\n    )\n}\n\nSankey.propTypes = SankeyPropTypes\n\nconst WrappedSankey = withContainer(Sankey)\nWrappedSankey.defaultProps = SankeyDefaultProps\n\nexport default WrappedSankey\n","/*\n * This file is part of the nivo project.\n *\n * Copyright 2016-present, Raphal Benitte.\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport React from 'react'\nimport { ResponsiveWrapper } from '@nivo/core'\nimport Sankey from './Sankey'\n\nconst ResponsiveSankey = props => (\n    <ResponsiveWrapper>\n        {({ width, height }) => <Sankey width={width} height={height} {...props} />}\n    </ResponsiveWrapper>\n)\n\nexport default ResponsiveSankey\n"]},"metadata":{},"sourceType":"module"}