{"ast":null,"code":"import _toConsumableArray from \"/Users/neilrens/Desktop/finances2/test/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nvar updateQueue = makeQueue();\n\nvar raf = function raf(fn) {\n  return schedule(fn, updateQueue);\n};\n\nvar writeQueue = makeQueue();\n\nraf.write = function (fn) {\n  return schedule(fn, writeQueue);\n};\n\nvar onStartQueue = makeQueue();\n\nraf.onStart = function (fn) {\n  return schedule(fn, onStartQueue);\n};\n\nvar onFrameQueue = makeQueue();\n\nraf.onFrame = function (fn) {\n  return schedule(fn, onFrameQueue);\n};\n\nvar onFinishQueue = makeQueue();\n\nraf.onFinish = function (fn) {\n  return schedule(fn, onFinishQueue);\n};\n\nvar timeouts = [];\n\nraf.setTimeout = function (handler, ms) {\n  var time = raf.now() + ms;\n\n  var cancel = function cancel() {\n    var i = timeouts.findIndex(function (t) {\n      return t.cancel == cancel;\n    });\n    if (~i) timeouts.splice(i, 1);\n    __raf.count -= ~i ? 1 : 0;\n  };\n\n  var timeout = {\n    time: time,\n    handler: handler,\n    cancel: cancel\n  };\n  timeouts.splice(findTimeout(time), 0, timeout);\n  __raf.count += 1;\n  start();\n  return timeout;\n};\n\nvar findTimeout = function findTimeout(time) {\n  return ~(~timeouts.findIndex(function (t) {\n    return t.time > time;\n  }) || ~timeouts.length);\n};\n\nraf.cancel = function (fn) {\n  updateQueue.delete(fn);\n  writeQueue.delete(fn);\n};\n\nraf.sync = function (fn) {\n  sync = true;\n  raf.batchedUpdates(fn);\n  sync = false;\n};\n\nraf.throttle = function (fn) {\n  var lastArgs;\n\n  function queuedFn() {\n    try {\n      fn.apply(void 0, _toConsumableArray(lastArgs));\n    } finally {\n      lastArgs = null;\n    }\n  }\n\n  function throttled() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n    raf.onStart(queuedFn);\n  }\n\n  throttled.handler = fn;\n\n  throttled.cancel = function () {\n    onStartQueue.delete(queuedFn);\n    lastArgs = null;\n  };\n\n  return throttled;\n};\n\nvar nativeRaf = typeof window != \"undefined\" ? window.requestAnimationFrame : function () {};\n\nraf.use = function (impl) {\n  return nativeRaf = impl;\n};\n\nraf.now = typeof performance != \"undefined\" ? function () {\n  return performance.now();\n} : Date.now;\n\nraf.batchedUpdates = function (fn) {\n  return fn();\n};\n\nraf.catch = console.error;\nvar ts = -1;\nvar sync = false;\n\nfunction schedule(fn, queue) {\n  if (sync) {\n    queue.delete(fn);\n    fn(0);\n  } else {\n    queue.add(fn);\n    start();\n  }\n}\n\nfunction start() {\n  if (ts < 0) {\n    ts = 0;\n    nativeRaf(loop);\n  }\n}\n\nfunction loop() {\n  if (~ts) {\n    nativeRaf(loop);\n    raf.batchedUpdates(update);\n  }\n}\n\nfunction update() {\n  var prevTs = ts;\n  ts = raf.now();\n  var count = findTimeout(ts);\n\n  if (count) {\n    eachSafely(timeouts.splice(0, count), function (t) {\n      return t.handler();\n    });\n    __raf.count -= count;\n  }\n\n  onStartQueue.flush();\n  updateQueue.flush(prevTs ? Math.min(64, ts - prevTs) : 16.667);\n  onFrameQueue.flush();\n  writeQueue.flush();\n  onFinishQueue.flush();\n}\n\nfunction makeQueue() {\n  var next = new Set();\n  var current = next;\n  return {\n    add: function add(fn) {\n      __raf.count += current == next && !next.has(fn) ? 1 : 0;\n      next.add(fn);\n    },\n    delete: function _delete(fn) {\n      __raf.count -= current == next && next.has(fn) ? 1 : 0;\n      return next.delete(fn);\n    },\n    flush: function flush(arg) {\n      if (current.size) {\n        next = new Set();\n        __raf.count -= current.size;\n        eachSafely(current, function (fn) {\n          return fn(arg) && next.add(fn);\n        });\n        __raf.count += next.size;\n        current = next;\n      }\n    }\n  };\n}\n\nfunction eachSafely(values, each) {\n  values.forEach(function (value) {\n    try {\n      each(value);\n    } catch (e) {\n      raf.catch(e);\n    }\n  });\n}\n\nvar __raf = {\n  count: 0,\n  clear: function clear() {\n    ts = -1;\n    timeouts = [];\n    onStartQueue = makeQueue();\n    updateQueue = makeQueue();\n    onFrameQueue = makeQueue();\n    writeQueue = makeQueue();\n    onFinishQueue = makeQueue();\n    __raf.count = 0;\n  }\n};\nexport { __raf, raf };","map":{"version":3,"sources":["../src/raf.ts"],"names":[],"mappings":"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","sourcesContent":["let updateQueue = makeQueue();\nconst raf = (fn) => schedule(fn, updateQueue);\nlet writeQueue = makeQueue();\nraf.write = (fn) => schedule(fn, writeQueue);\nlet onStartQueue = makeQueue();\nraf.onStart = (fn) => schedule(fn, onStartQueue);\nlet onFrameQueue = makeQueue();\nraf.onFrame = (fn) => schedule(fn, onFrameQueue);\nlet onFinishQueue = makeQueue();\nraf.onFinish = (fn) => schedule(fn, onFinishQueue);\nlet timeouts = [];\nraf.setTimeout = (handler, ms) => {\n  let time = raf.now() + ms;\n  let cancel = () => {\n    let i = timeouts.findIndex((t) => t.cancel == cancel);\n    if (~i)\n      timeouts.splice(i, 1);\n    __raf.count -= ~i ? 1 : 0;\n  };\n  let timeout = {time, handler, cancel};\n  timeouts.splice(findTimeout(time), 0, timeout);\n  __raf.count += 1;\n  start();\n  return timeout;\n};\nlet findTimeout = (time) => ~(~timeouts.findIndex((t) => t.time > time) || ~timeouts.length);\nraf.cancel = (fn) => {\n  updateQueue.delete(fn);\n  writeQueue.delete(fn);\n};\nraf.sync = (fn) => {\n  sync = true;\n  raf.batchedUpdates(fn);\n  sync = false;\n};\nraf.throttle = (fn) => {\n  let lastArgs;\n  function queuedFn() {\n    try {\n      fn(...lastArgs);\n    } finally {\n      lastArgs = null;\n    }\n  }\n  function throttled(...args) {\n    lastArgs = args;\n    raf.onStart(queuedFn);\n  }\n  throttled.handler = fn;\n  throttled.cancel = () => {\n    onStartQueue.delete(queuedFn);\n    lastArgs = null;\n  };\n  return throttled;\n};\nlet nativeRaf = typeof window != \"undefined\" ? window.requestAnimationFrame : () => {\n};\nraf.use = (impl) => nativeRaf = impl;\nraf.now = typeof performance != \"undefined\" ? () => performance.now() : Date.now;\nraf.batchedUpdates = (fn) => fn();\nraf.catch = console.error;\nlet ts = -1;\nlet sync = false;\nfunction schedule(fn, queue) {\n  if (sync) {\n    queue.delete(fn);\n    fn(0);\n  } else {\n    queue.add(fn);\n    start();\n  }\n}\nfunction start() {\n  if (ts < 0) {\n    ts = 0;\n    nativeRaf(loop);\n  }\n}\nfunction loop() {\n  if (~ts) {\n    nativeRaf(loop);\n    raf.batchedUpdates(update);\n  }\n}\nfunction update() {\n  let prevTs = ts;\n  ts = raf.now();\n  let count = findTimeout(ts);\n  if (count) {\n    eachSafely(timeouts.splice(0, count), (t) => t.handler());\n    __raf.count -= count;\n  }\n  onStartQueue.flush();\n  updateQueue.flush(prevTs ? Math.min(64, ts - prevTs) : 16.667);\n  onFrameQueue.flush();\n  writeQueue.flush();\n  onFinishQueue.flush();\n}\nfunction makeQueue() {\n  let next = new Set();\n  let current = next;\n  return {\n    add(fn) {\n      __raf.count += current == next && !next.has(fn) ? 1 : 0;\n      next.add(fn);\n    },\n    delete(fn) {\n      __raf.count -= current == next && next.has(fn) ? 1 : 0;\n      return next.delete(fn);\n    },\n    flush(arg) {\n      if (current.size) {\n        next = new Set();\n        __raf.count -= current.size;\n        eachSafely(current, (fn) => fn(arg) && next.add(fn));\n        __raf.count += next.size;\n        current = next;\n      }\n    }\n  };\n}\nfunction eachSafely(values, each) {\n  values.forEach((value) => {\n    try {\n      each(value);\n    } catch (e) {\n      raf.catch(e);\n    }\n  });\n}\nconst __raf = {\n  count: 0,\n  clear() {\n    ts = -1;\n    timeouts = [];\n    onStartQueue = makeQueue();\n    updateQueue = makeQueue();\n    onFrameQueue = makeQueue();\n    writeQueue = makeQueue();\n    onFinishQueue = makeQueue();\n    __raf.count = 0;\n  }\n};\n\nexport { __raf, raf };\n//# sourceMappingURL=raf.mjs.map\n"]},"metadata":{},"sourceType":"module"}